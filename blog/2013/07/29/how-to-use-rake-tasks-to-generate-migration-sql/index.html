
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>How to Use Rake Tasks to Generate Raw SQL From ActiveRecord Migrations - eugenius</title>
  <meta name="author" content="Eugene Wang">

  
  <meta name="description" content="Recently at the NYT on the product I&#8217;m working on, we came across the problem of having to convert ActiveRecord migrations into raw SQL in &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://eewang.github.com/blog/2013/07/29/how-to-use-rake-tasks-to-generate-migration-sql/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
   <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="eugenius" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38259585-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:eewang.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">How to Use Rake Tasks to Generate Raw SQL From ActiveRecord Migrations</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-29T19:26:00-04:00" pubdate data-updated="true">Jul 29<span>th</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Recently at the NYT on the product I&#8217;m working on, we came across the problem of having to convert ActiveRecord migrations into raw SQL in order to be processed on our production database. Our infrastructure/systems team needs SQL in order to generate migrations; since not all teams at the NYT use Rails, ActiveRecord&#8217;s migrations cannot be automatically applied to the production database.</p>

<!--more-->


<p>So the senior developer I work closely with wrote a rake task that parsed the SQL generated by ActiveRecord migration tasks into a .sql file, which our systems team could then use to generate the necessary database migrations. Although I had no role in actually writing the code, I thought that the rake task touched on a few interesting concepts in Ruby, so I felt compelled to post it and annotate it a little bit.</p>

<p>Here&#8217;s the code in its entirety. Its saved in a .rake file in the tasks folder in the lib directory.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">namespace</span> <span class="ss">:db</span> <span class="k">do</span>
</span><span class='line'>  <span class="o">[</span> <span class="ss">:migrate</span><span class="p">,</span> <span class="ss">:rollback</span> <span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
</span><span class='line'>    <span class="n">namespace</span> <span class="n">n</span> <span class="k">do</span> <span class="o">|</span><span class="n">migration_task</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">original_task</span> <span class="o">=</span> <span class="n">migration_task</span><span class="o">.</span><span class="n">instance_variable_get</span><span class="p">(</span><span class="s2">&quot;@scope&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span> <span class="s2">&quot;:&quot;</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">[</span><span class="ss">:with_sql</span><span class="p">,</span> <span class="ss">:to_sql</span> <span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">desc</span> <span class="s2">&quot;Run migration, and generated SQL&quot;</span> <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="ss">:with_sql</span>
</span><span class='line'>        <span class="n">desc</span> <span class="s2">&quot;Generate migration SQL&quot;</span> <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="ss">:to_sql</span>
</span><span class='line'>        <span class="n">task</span> <span class="n">t</span> <span class="o">=&gt;</span> <span class="ss">:environment</span> <span class="k">do</span> <span class="o">|</span><span class="n">sql_task</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">case</span> <span class="n">original_task</span>
</span><span class='line'>          <span class="k">when</span> <span class="s2">&quot;db:migrate&quot;</span>
</span><span class='line'>            <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;upgrade.sql&#39;</span>
</span><span class='line'>          <span class="k">when</span> <span class="s2">&quot;db:rollback&quot;</span>
</span><span class='line'>            <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;rollback.sql&#39;</span>
</span><span class='line'>          <span class="k">else</span>
</span><span class='line'>            <span class="k">raise</span> <span class="s2">&quot;unkown migration type </span><span class="si">#{</span><span class="n">original_task</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>          <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">class_eval</span> <span class="k">do</span>
</span><span class='line'>            <span class="c1"># alias the adapter&#39;s execute for later use</span>
</span><span class='line'>            <span class="k">alias</span> <span class="ss">:old_execute</span> <span class="ss">:execute</span>
</span><span class='line'>
</span><span class='line'>            <span class="no">SQL_FILENAME</span> <span class="o">=</span> <span class="n">filename</span>
</span><span class='line'>            <span class="no">RUN_SQL</span> <span class="o">=</span> <span class="n">sql_task</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">ends_with?</span><span class="p">(</span><span class="s2">&quot;with_sql&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1"># define our own execute</span>
</span><span class='line'>            <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="nb">name</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
</span><span class='line'>              <span class="c1"># check for some DDL and DML statements</span>
</span><span class='line'>              <span class="k">if</span> <span class="sr">/^(create|alter|drop|insert|delete|update)/i</span><span class="o">.</span><span class="n">match</span> <span class="n">sql</span>
</span><span class='line'>                <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="no">SQL_FILENAME</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">f</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">sql</span><span class="si">}</span><span class="s2">;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">}</span>
</span><span class='line'>                <span class="n">old_execute</span> <span class="n">sql</span><span class="p">,</span> <span class="nb">name</span> <span class="k">if</span> <span class="no">RUN_SQL</span>
</span><span class='line'>              <span class="k">else</span>
</span><span class='line'>                <span class="c1"># pass everything else to the aliased execute</span>
</span><span class='line'>                <span class="n">old_execute</span> <span class="n">sql</span><span class="p">,</span> <span class="nb">name</span>
</span><span class='line'>              <span class="k">end</span>
</span><span class='line'>            <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1"># create or delete content of migration.sql</span>
</span><span class='line'>          <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="no">SQL_FILENAME</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">f</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;-- Script created @ </span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1"># invoke the normal migration procedure now</span>
</span><span class='line'>          <span class="ss">Rake</span><span class="p">:</span><span class="ss">:Task</span><span class="o">[</span><span class="n">original_task</span><span class="o">].</span><span class="n">invoke</span>
</span><span class='line'>
</span><span class='line'>          <span class="nb">puts</span> <span class="s2">&quot;Ran </span><span class="si">#{</span><span class="n">original_task</span><span class="si">}</span><span class="s2"> and wrote sql to </span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>At a high level, this code does the following:
* Open up the db namespace and add a sub rake task atop the db:migrate and db:rollback commands
* Hijacks the execute method and writes the SQL otherwise executed by Rails to a file.
* Permit users to specify whether they want Rails to actually execute the SQL code or just to write it to a file for later use</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">namespace</span> <span class="ss">:db</span> <span class="k">do</span>
</span><span class='line'>  <span class="o">[</span> <span class="ss">:migrate</span><span class="p">,</span> <span class="ss">:rollback</span> <span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
</span><span class='line'>    <span class="n">namespace</span> <span class="n">n</span> <span class="k">do</span> <span class="o">|</span><span class="n">migration_task</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">original_task</span> <span class="o">=</span> <span class="n">migration_task</span><span class="o">.</span><span class="n">instance_variable_get</span><span class="p">(</span><span class="s2">&quot;@scope&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span> <span class="s2">&quot;:&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This code opens up the :db namespace and executes the same block of code for the :migrate and :rollback sub name spaces. The :with_sql and :to_sql commands get appended to both namespaces, for a total of 4 new rake commands. The last line here just reverse engineers the original command; the original_task local variable returns &#8216;db:migrate&#8217; or &#8216;db:rollback&#8217;.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="ss">:with_sql</span><span class="p">,</span> <span class="ss">:to_sql</span> <span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="n">desc</span> <span class="s2">&quot;Run migration, and generated SQL&quot;</span> <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="ss">:with_sql</span>
</span><span class='line'><span class="n">desc</span> <span class="s2">&quot;Generate migration SQL&quot;</span> <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="ss">:to_sql</span>
</span><span class='line'><span class="n">task</span> <span class="n">t</span> <span class="o">=&gt;</span> <span class="ss">:environment</span> <span class="k">do</span> <span class="o">|</span><span class="n">sql_task</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">case</span> <span class="n">original_task</span>
</span><span class='line'>  <span class="k">when</span> <span class="s2">&quot;db:migrate&quot;</span>
</span><span class='line'>    <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;upgrade.sql&#39;</span>
</span><span class='line'>  <span class="k">when</span> <span class="s2">&quot;db:rollback&quot;</span>
</span><span class='line'>    <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;rollback.sql&#39;</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="k">raise</span> <span class="s2">&quot;unkown migration type </span><span class="si">#{</span><span class="n">original_task</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This sets up the creation of a file based on the type of migration task that is being considered. &#8216;upgrade.sql&#8217; will execute a migration while &#8216;rollback.sql&#8217; will reverse one. The idea is that adding these .sql files will make it as easy as possible for a database architect to execute a migration on a staging or production server, rather than deciphering the Rails migration herself. I generally take for granted the fact that I work in Rails; now that I&#8217;m no longer at Flatiron, I need to remember that not all databases uses the Rails ORM to connect to an application, but SQL remains a common language that most databases understand. Although ActiveRecord seems to abstract away so much of the underlying database connections, at the end of the day all its doing is executing SQL, which you can write directly into your Ruby code. In fact, a common complaint I&#8217;ve heard about Rails is that for more complex queries, you can&#8217;t rely just on ActiveRecord to generate efficient queries and instead have to fall back on executing raw SQL.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">class_eval</span> <span class="k">do</span>
</span><span class='line'>  <span class="c1"># alias the adapter&#39;s execute for later use</span>
</span><span class='line'>  <span class="k">alias</span> <span class="ss">:old_execute</span> <span class="ss">:execute</span>
</span><span class='line'>
</span><span class='line'>  <span class="no">SQL_FILENAME</span> <span class="o">=</span> <span class="n">filename</span>
</span><span class='line'>  <span class="no">RUN_SQL</span> <span class="o">=</span> <span class="n">sql_task</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">ends_with?</span><span class="p">(</span><span class="s2">&quot;with_sql&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># define our own execute</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="nb">name</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># check for some DDL and DML statements</span>
</span><span class='line'>    <span class="k">if</span> <span class="sr">/^(create|alter|drop|insert|delete|update)/i</span><span class="o">.</span><span class="n">match</span> <span class="n">sql</span>
</span><span class='line'>      <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="no">SQL_FILENAME</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">f</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">sql</span><span class="si">}</span><span class="s2">;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">}</span>
</span><span class='line'>      <span class="n">old_execute</span> <span class="n">sql</span><span class="p">,</span> <span class="nb">name</span> <span class="k">if</span> <span class="no">RUN_SQL</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="c1"># pass everything else to the aliased execute</span>
</span><span class='line'>      <span class="n">old_execute</span> <span class="n">sql</span><span class="p">,</span> <span class="nb">name</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is the core of the rake task, and it includes some nifty metaprogramming components, including class_eval and the alias method. The code overrides ActiveRecord&#8217;s default #execute method. When the interpreter hits the class_eval method, it executes the following code as if that code was included in the class. In this case, execute is an instance method, since class_eval is a method in the Module class and so the code in the enclosed methods is executed in the context of that class (e.g., as an instance method). Confused? Don&#8217;t worry, I&#8217;m still trying to fully grasp how some of these metaprogramming methods work.</p>

<p>Anyways, the use of class_eval enables the rake task to extend the functionality of the standard #execute method and have it write out to a text file. The default method takes in raw sql as an argument and executes it on the connection&#8217;s class. By writing our own method, this allows us to insert logic before the execution occurs. The alias stores the Rails execute method as :old_execute, which is called only if the rake task includes the :with_sql suffix. If the sql that Rails would otherwise execute includes a migration task (e.g., CREATE, ALTER, DROP, INSERT, DELETE or UPDATE), then this sql is written to a file saved to the root Rails directory.</p>

<p>If you&#8217;re interested in the concepts covered in this code, here are a few links that are helpful:</p>

<p><a href="http://www.jimmycuadra.com/posts/metaprogramming-ruby-class-eval-and-instance-eval" target="_blank">Class Eval vs. Instance Eval</a></p>

<p><a href="http://paul-wong-jr.blogspot.com/2012/04/ruby-metaprogramming-with-classeval.html" target="_blank">More about class_eval</a></p>

<p><a href="http://andreacfm.com/2012/11/29/ruby-alias-vs-alias-method/" target="_blank">Ruby&#8217;s alias and alias_method</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Eugene Wang</span></span>

      








  


<time datetime="2013-07-29T19:26:00-04:00" pubdate data-updated="true">Jul 29<span>th</span>, 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://eewang.github.com/blog/2013/07/29/how-to-use-rake-tasks-to-generate-migration-sql/" data-via="eugenewang" data-counturl="http://eewang.github.com/blog/2013/07/29/how-to-use-rake-tasks-to-generate-migration-sql/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/07/23/using-activemodel-serializers-to-build-great-json-interfaces/" title="Previous Post: Using ActiveModel Serializers to Build Great JSON Interfaces">&laquo; Using ActiveModel Serializers to Build Great JSON Interfaces</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/08/26/navigating-the-job-search/" title="Next Post: Navigating the Job Search">Navigating the Job Search &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1 style="font-size: 28px;"><a href="http://eewang.github.com/">eugenius blog</a></h1>
</section><section>
  <ul id="recent_posts">
      <li class="post">
      <a href="http://eewang.github.com" alt="Home"><img src="/images/Home.png"></a>
      <a href="http://eewang.github.com/archives/" alt="Archives"><img src="/images/Calendar.png"></a>
      <a href="mailto:eugene.wang.77@gmail.com" alt="E-Mail"><img src="/images/Envelope.png"></a>
      <a href="http://eewang.github.com/atom.xml" alt="subscribe feed"><img src="/images/rss_big.png"></a>
      </li>
  </ul>
</section>
<section>
  <h1>Lazy, Impatient, Prideful</h1>
  <p>
  	My name is Eugene Wang, and I am currently a software developer at the New York Times on the New Products team, primarily using Ruby and Javascript. It should go without saying that the thoughts and opinions expressed here are my own and not representative of my employer.
  </p>
	<p>
		Formerly, I was a student at <a href="http://www.flatironschool.com/" target="_blank">The Flatiron School</a> in New York City from January to April 2013. This blog is about my ongoing journey to learn how to build awesome web products and develop, as <a href="http://en.wikipedia.org/wiki/Larry_Wall" target="_blank">Larry Wall</a> once said, the three great virtues of a programmer: laziness, impatience, and hubris.
	</p>  
  <p>Damn, it feels good to be a hacker. </p>
</section>
<section>
  <h1>Flatiron Blogs</h1>
  <h4>Check out these awesome blogs by my Flatiron School classmates</h4>
  <ul>
      <li><a href="http://anabecker.tumblr.com/" target="_blank">Ana Becker</a></li>
      <li><a href="http://1aurabrown.github.com/" target="_blank">Laura Brown</a></li>
      <li><a href="http://andrewcallahan.tumblr.com/" target="_blank">Andrew Callahan</a></li>
      <li><a href="http://christinachang.github.com/" target="_blank">Christina Chang</a></li>
      <li><a href="http://acrystalc.github.com/" target="_blank">Crystal Chang</a></li>
      <li><a href="http://tylerdavis.github.com/#blog" target="_blank">Tyler Davis</a></li>
      <li><a href="http://johnkellyferguson.github.com/" target="_blank">John Kelly Ferguson</a></li>
      <li><a href="http://vicfriedman.github.com/" target="_blank">Victoria Friedman</a></li>
      <li><a href="http://ei-lene.github.com/" target="_blank">Ei-lene Heng</a></li>
      <li><a href="http://aspectratio.github.com/" target="_blank">Tim Hunter</a></li>
      <li><a href="http://iacutone.github.com/" target="_blank">Eric Iacutone</a></li>      
      <li><a href="http://modernlegend.github.com/" target="_blank">Yanik Jayaram</a></li>
      <li><a href="http://meowist.github.com/" target="_blank">Justin Kestler</a></li>
      <li><a href="http://chokim.github.com/" target="_blank">Cho Kim</a></li>
      <li><a href="http://jlarusso.github.com/" target="_blank">Jesse LaRusso</a></li>
      <li><a href="http://www.erinandcode.com/" target="_blank">Erin Lee</a></li>
      <li><a href="http://dolin.github.com/" target="_blank">Danny Olinksy</a></li>
      <li><a href="http://mrikhter.github.com/" target="_blank">Masha Rikhter</a></li>
      <li><a href="http://rseshan.github.com/" target="_blank">Rahul Seshan</a></li>
      <li><a href="http://walliswt.github.com/" target="_blank">Wallis Wilkinson-Tsai</a></li>
      <li><a href="http://janeeats.github.com/" target="_blank">Jane Vora</a></li>
      <li><a href="http://hwang0214.github.com/" target="_blank">Harrison Wang</a></li>
      <li><a href="http://anthonywijnen.com/" target="_blank">Anthony Wignen</a></li>
  </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/04/tips-for-the-next-flatiron-school-cohort/">Tips for The Next Flatiron School Cohort</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/18/how-to-smell-check-your-code-quality-in-ruby-and-rails/">What's that (code) smell? How to monitor code quality in Ruby and Rails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/04/4-goals-for-2014/">4 Goals for 2014</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/04/with-great-power-comes-great-single-responsibility/">With Great Power Comes Great (Single) Responsibility</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/14/useful-tips-and-tricks-for-building-a-rails-app/">Favorite (Rails) developer tips and tricks</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/eewang">@eewang</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'eewang',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("eugenewang", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/eugenewang" class="twitter-follow-button" data-show-count="false">Follow @eugenewang</a>
  
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Eugene Wang -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'eugenewang';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://eewang.github.com/blog/2013/07/29/how-to-use-rake-tasks-to-generate-migration-sql/';
        var disqus_url = 'http://eewang.github.com/blog/2013/07/29/how-to-use-rake-tasks-to-generate-migration-sql/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
